# GLITCHLAB configuration overrides
# Values here are merged on top of built-in defaults.

boundaries:
  protected_paths:
    - ".github"
    - ".githooks"
    - "CLAUDE.md"
    - ".glitchlab/config.yaml"

limits:
  max_tool_turns: 12
  max_tokens_per_task: 60000
  max_dollars_per_task: 1.00
  max_total_tasks: 200
  max_remediation_depth: 1
  repair_budget_fraction: 0.20

routing:
  # Static fallbacks
  planner: "gemini/gemini-2.5-flash"
  implementer: "anthropic/claude-sonnet-4-20250514"
  debugger: "anthropic/claude-sonnet-4-20250514"
  security: "gemini/gemini-2.5-flash"
  release: "gemini/gemini-2.5-flash"
  archivist: "gemini/gemini-2.5-flash"

  # Model pool for cost-aware chooser
  models:
    - model: "gemini/gemini-2.5-flash-lite"
      tier: economy
      capabilities: [tool_use, code]
    - model: "gemini/gemini-2.5-flash"
      tier: standard
      capabilities: [tool_use, code, long_context]
    - model: "gemini/gemini-2.5-pro"
      tier: standard_plus
      capabilities: [tool_use, code, long_context]
    - model: "anthropic/claude-sonnet-4-20250514"
      tier: premium
      capabilities: [tool_use, code, long_context, vision]
    # OpenAI models disabled â€” no OPENAI_API_KEY configured.
    # Re-enable when key is available.
    # - model: "openai/gpt-4o"
    #   tier: premium
    #   capabilities: [tool_use, code, long_context, vision]
    # - model: "openai/gpt-4o-mini"
    #   tier: standard
    #   capabilities: [tool_use, code]

  roles:
    planner:
      min_tier: standard
    implementer:
      min_tier: premium
      requires: [tool_use, code]
    debugger:
      min_tier: standard
      requires: [tool_use]
    security:
      min_tier: economy
    release:
      min_tier: economy
    archivist:
      min_tier: economy
    architect_triage:
      min_tier: economy
      requires: [code]
    architect_review:
      min_tier: economy
      requires: [code]

  ops_diagnosis: "gemini/gemini-2.5-flash-lite"
  cost_quality_threshold: 0.7

memory:
  beads_enabled: true
  dolt_connection: "mysql://glitchlab:glitchlab@localhost:3306/glitchlab"

tqm:
  remediation_enabled: true
  remediation_priority: 2

pipeline:
  short_circuit_enabled: true

providers:
  gemini:
    api_key_env: GEMINI_API_KEY
  anthropic:
    api_key_env: ANTHROPIC_API_KEY
  openai:
    api_key_env: OPENAI_API_KEY
